{"version":3,"file":"transforms.js","sourceRoot":"","sources":["../../src/utils/transforms.ts"],"names":[],"mappings":";;;AAIA,2BAA0C;AAE1C,SAAgB,aAAa,CAAC,OAAgB;IAC1C,OAAO;QACH,KAAK,EAAM,OAAO,CAAC,KAAK;QACxB,KAAK,EAAM,OAAO,CAAC,KAAK;QACxB,EAAE,EAAS,OAAO,CAAC,EAAE;QACrB,SAAS,EAAE,OAAO,CAAC,UAAU;QAC7B,QAAQ,EAAG,OAAO,CAAC,IAAI;KAC1B,CAAC;AACN,CAAC;AARD,sCAQC;AAED,SAAgB,gBAAgB,CAAC,UAAsB,EAAE,WAAiC;IACtF,OAAO;QACH,IAAI,EAAE,UAAU,CAAC,IAAI;QAErB,KAAK,EAAI,UAAU,CAAC,KAAK;QACzB,OAAO,EAAE,IAAA,WAAU,EAAC,UAAU,CAAC,OAAO,CAAC;QACvC,IAAI,EAAK,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QAClC,MAAM,EAAG,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC;KAC9C,CAAC;AACN,CAAC;AATD,4CASC;AAED,SAAgB,uBAAuB,CAAC,iBAAoC,EAAE,WAAiC;IAC3G,OAAO;QACH,IAAI,EAAE,WAAW,CAAC,iBAAiB,CAAC,UAAU,CAAC;QAE/C,WAAW,EAAE,iBAAiB,CAAC,OAAO;QACtC,WAAW,EAAE,iBAAiB,CAAC,OAAO;KACzC,CAAC;AACN,CAAC;AAPD,0DAOC;AAED,SAAgB,mBAAmB,CAAC,aAA4B;IAC5D,OAAO;QACH,IAAI,EAAE,aAAa,CAAC,IAAI;QAExB,OAAO,EAAE,aAAa,CAAC,OAAO;QAC9B,MAAM,EAAG,aAAa,CAAC,MAAM;KAChC,CAAC;AACN,CAAC;AAPD,kDAOC;AAED,SAAgB,gBAAgB,CAAC,OAAgB;IAC7C,OAAO;QACH,wEAAwE;QACxE,WAAW,EAAE,OAAO,CAAC,WAAW,IAAI,0BAA0B;QAC9D,OAAO,EAAM,OAAO,CAAC,OAAO,IAAI,EAAE;QAClC,OAAO,EAAM,OAAO,CAAC,OAAO;QAC5B,WAAW,EAAE,OAAO,CAAC,WAAW,IAAI,EAAE;KACzC,CAAC;AACN,CAAC;AARD,4CAQC;AAED,SAAgB,WAAW,CAAC,OAAe;IACvC,OAAO,OAAO;SACT,KAAK,CAAC,IAAI,CAAC;SACX,GAAG,CAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAE;SAC1B,IAAI,CAAC,IAAI,CAAC;SACV,IAAI,EAAE,CAAC;AAChB,CAAC;AAND,kCAMC","sourcesContent":["import { Message, NickChangeInfo, SysMessage, User } from \"../types/events\";\nimport { RawMessage, RawNickChangeInfo, RawSysMessage, RawUser } from \"../types/socket.io\";\nimport { Command, NormalizedCommand } from \"../types/types\";\n\nimport { decode as decodeHTML } from \"he\";\n\nexport function transformUser(rawUser: RawUser): User {\n    return {\n        color    : rawUser.color,\n        flags    : rawUser.flags,\n        ID       : rawUser.id,\n        sessionID: rawUser.session_id,\n        nickname : rawUser.user,\n    };\n}\n\nexport function transformMessage(rawMessage: RawMessage, onlineUsers: Record<string, User>): Message {\n    return {\n        type: rawMessage.type,\n\n        color  : rawMessage.color,\n        content: decodeHTML(rawMessage.content),\n        date   : new Date(rawMessage.date),\n        author : onlineUsers[rawMessage.session_id],\n    };\n}\n\nexport function transformNickChangeInfo(rawNickChangeInfo: RawNickChangeInfo, onlineUsers: Record<string, User>): NickChangeInfo {\n    return {\n        user: onlineUsers[rawNickChangeInfo.session_id],\n\n        oldNickname: rawNickChangeInfo.oldUser,\n        newNickname: rawNickChangeInfo.newUser,\n    };\n}\n\nexport function transformSysMessage(rawSysMessage: RawSysMessage): SysMessage {\n    return {\n        type: rawSysMessage.type,\n\n        message: rawSysMessage.message,\n        isHTML : rawSysMessage.isHtml,\n    };\n}\n\nexport function normalizeCommand(command: Command): NormalizedCommand {\n    return {\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        description: command.description || \"No description provided.\",\n        aliases    : command.aliases ?? [],\n        handler    : command.handler,\n        subcommands: command.subcommands ?? {},\n    };\n}\n\nexport function trimMessage(message: string): string {\n    return message\n        .split(\"\\n\")\n        .map( line => line.trim() )\n        .join(\"\\n\")\n        .trim();\n}"]}